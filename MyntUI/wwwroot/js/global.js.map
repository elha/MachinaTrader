{"version":3,"sources":["src/global.js"],"names":["getParam","name","replace","regexS","regex","RegExp","results","exec","window","location","href","selectPickerImage","opt","id","text","optimage","$","element","data","opticon","$opt","jsInterval","signalrConnections","runJsInterval","script","str","delay","setInterval","clearJsInterval","key","Object","prototype","hasOwnProperty","call","clearInterval","addSignalrClient","connection","cleanSignalr","stop","beforeHook","document","off","afterHook","select2","theme","templateResult","templateSelection","width"],"mappings":"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","sourcesContent":["// Wire up signalr and js intervals -> preparePage() is hooked from navigation script on page change\r\n/* eslint-disable */\n\nfunction getParam(name) {\r\n    name = name.replace(/[\\[]/, \"\\\\\\[\").replace(/[\\]]/, \"\\\\\\]\");\r\n    var regexS = \"[\\\\?&]\" + name + \"=([^&#]*)\";\r\n    var regex = new RegExp(regexS);\r\n    var results = regex.exec(window.location.href);\r\n    if (results === null)\r\n        return null;\r\n    else\r\n        return results[1];\r\n}\n\nfunction selectPickerImage(opt) {\r\n    if (!opt.id) {\r\n        return opt.text;\r\n    }\r\n    var optimage = $(opt.element).data('image');\r\n    var opticon = $(opt.element).data('icon');\r\n    if (!optimage && !opticon) {\r\n        return opt.text;\r\n    }\r\n    if (optimage) {\r\n        var $opt = $(\r\n            '<span class=\"userName\"><img style=\"width: 16px;\" src=\"' + optimage + '\" class=\"dropdownImage\" />&nbsp;&nbsp;' + $(opt.element).text() + '</span>'\r\n        );\r\n        return $opt;\r\n    }\r\n    if (opticon) {\r\n        var $opt = $(\r\n            '<span class=\"userName\"><i class=\"' + opticon + '\"/></i>&nbsp;&nbsp;' + $(opt.element).text() + '</span>'\r\n        );\r\n        return $opt;\r\n    }\r\n};\r\n\r\n\r\nconst jsInterval = {}\r\nconst signalrConnections = {}\r\n\r\nfunction runJsInterval(script, str, delay) {\r\n  if (!jsInterval[str]) {\r\n    // console.log(\"Not in array\")\r\n    jsInterval[str] = setInterval(script, delay)\r\n  }\r\n}\r\n\r\nfunction clearJsInterval() {\r\n  for (const key in jsInterval) {\r\n    if (Object.prototype.hasOwnProperty.call(jsInterval, key)) {\r\n      clearInterval(jsInterval[key])\r\n      jsInterval[key] = null\r\n      delete jsInterval[key]\r\n    }\r\n  }\r\n}\r\n\r\n/* eslint-disable no-unused-vars */\r\nfunction addSignalrClient(name, connection) {\r\n  if (!signalrConnections[name]) {\r\n    // console.log(\"Not in array\")\r\n    signalrConnections[name] = connection\r\n  }\r\n}\r\n\r\nfunction cleanSignalr() {\r\n  for (const key in signalrConnections) {\r\n    if (Object.prototype.hasOwnProperty.call(signalrConnections, key)) {\r\n      // console.log(\"Disconnect\")\r\n      // console.log(signalrConnections[key])\r\n      signalrConnections[key].stop()\r\n      delete signalrConnections[key]\r\n    }\r\n  }\r\n}\r\n\r\nfunction beforeHook() {\r\n\t// Hacky way to remove intervals\r\n\t/*for(i=0; i<100; i++)\r\n\t{\r\n\t\twindow.clearInterval(i);\r\n\t}*/\t\t\r\n\t//Cleanup all keydown listeners -> Needed for some JS components\r\n\t$(document).off(\"keydown\");\t\r\n\tclearJsInterval();\r\n\tcleanSignalr();\r\n}\r\n\r\nfunction afterHook() {\r\n\t$(\".select2\").select2({\r\n\t\ttheme: \"bootstrap\",\r\n\t\ttemplateResult: selectPickerImage,\r\n\t\ttemplateSelection: selectPickerImage,\r\n\t\twidth: \"100%\"\r\n\t});\r\n}\n"],"file":"global.js"}